# –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - 29 –æ–∫—Ç—è–±—Ä—è 2025

## –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è
–ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞—É–¥–∏—Ç –≤—Å–µ–≥–æ –∫–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—è:
- –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª app/page.tsx
- –°–∏—Å—Ç–µ–º—É —ç–Ω–µ—Ä–≥–∏–∏ –∏ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –°–∏—Å—Ç–µ–º—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è game-storage.ts
- –í—Å–µ —ç–∫—Ä–∞–Ω—ã (home, stage, studio, artists, skills, contracts)
- –ò–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É game-state.ts
- API —Ä–æ—É—Ç—ã
- –°–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- –°–∏—Å—Ç–µ–º—É –∞—Ä—Ç–∏—Å—Ç–æ–≤ –∏ –ª–µ–π–±–ª–æ–≤
- –°–∏—Å—Ç–µ–º—É –Ω–∞–≤—ã–∫–æ–≤
- –†–∏—Ç–º-–∏–≥—Ä—É

---

## üêõ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ë–ê–ì–ò

### –ë–ê–ì #1: –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–Ω–µ—Ä–≥–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –±–æ–Ω—É—Å—ã –∞—Ä—Ç–∏—Å—Ç–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–§–∞–π–ª**: `app/page.tsx:180-209`

**–ü—Ä–æ–±–ª–µ–º–∞**:
–ö–æ–¥ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏ (–∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥) **–ù–ï** –¥–æ–±–∞–≤–ª—è–µ—Ç –±–æ–Ω—É—Å—ã –æ—Ç –∞—Ä—Ç–∏—Å—Ç–æ–≤ –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ —ç–Ω–µ—Ä–≥–∏—è –Ω–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤—ã—à–µ –±–∞–∑–æ–≤–æ–≥–æ –º–∞–∫—Å–∏–º—É–º–∞ –¥–∞–∂–µ –µ—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –µ—Å—Ç—å –∞—Ä—Ç–∏—Å—Ç—ã.

**–ö–æ–¥ (—Å—Ç—Ä–æ–∫–∞ 191-198)**:
```typescript
let maxEnergy = ENERGY_CONFIG.BASE_MAX_ENERGY
const skillMaxEnergyBonus = getSkillMaxEnergyBonus(prev.skills)
maxEnergy = Math.floor(maxEnergy * (1 + skillMaxEnergyBonus))

if (prev.musicStyle === "electronic") maxEnergy += 30
if (prev.startingBonus === "energizer") maxEnergy += 50

// ‚ùå –û–¢–°–£–¢–°–¢–í–£–ï–¢: –±–æ–Ω—É—Å—ã –æ—Ç –∞—Ä—Ç–∏—Å—Ç–æ–≤ –ù–ï –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è
const newEnergy = Math.min(maxEnergy, Math.round(prev.energy + recoveryAmount))
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```typescript
let maxEnergy = ENERGY_CONFIG.BASE_MAX_ENERGY
const skillMaxEnergyBonus = getSkillMaxEnergyBonus(prev.skills)
maxEnergy = Math.floor(maxEnergy * (1 + skillMaxEnergyBonus))

if (prev.musicStyle === "electronic") maxEnergy += 30
if (prev.startingBonus === "energizer") maxEnergy += 50

// ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –±–æ–Ω—É—Å—ã –æ—Ç –∞—Ä—Ç–∏—Å—Ç–æ–≤
const artistEnergyBonus = getTotalEnergyBonus(prev.artists)
maxEnergy += artistEnergyBonus

const newEnergy = Math.min(maxEnergy, Math.round(prev.energy + recoveryAmount))
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ò–≥—Ä–æ–∫ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –æ—Ç –Ω–∞–π–º–∞ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –≤ –æ–Ω–ª–∞–π–Ω —Ä–µ–∂–∏–º–µ
- –≠–Ω–µ—Ä–≥–∏—è –∑–∞—Å—Ç—Ä–µ–≤–∞–µ—Ç –Ω–∞ –±–∞–∑–æ–≤–æ–º –º–∞–∫—Å–∏–º—É–º–µ (150-200)
- –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é offline —ç–Ω–µ—Ä–≥–∏–∏ –≤ game-storage.ts

---

### –ë–ê–ì #2: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ENERGY_REGEN_PER_MINUTE

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° –°–†–ï–î–ù–ò–ô

**–§–∞–π–ª**: `lib/game-state.ts:220`

**–ü—Ä–æ–±–ª–µ–º–∞**:
–í –∫–æ–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `ENERGY_REGEN_PER_MINUTE: 2`, –Ω–æ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∏ –≤ –∫–æ–º–º–∏—Ç–∞—Ö —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å –∑–Ω–∞—á–µ–Ω–∏–µ 2.5.

**–ö–æ–¥**:
```typescript
export const ENERGY_CONFIG = {
  BASE_MAX_ENERGY: 150,
  ENERGY_REGEN_PER_MINUTE: 2, // ‚ùì –ë—ã–ª–æ –æ–±–µ—â–∞–Ω–æ 2.5
  ENERGY_COST_PER_BEAT: 15,
  FULL_RECHARGE_TIME_MINUTES: 75,
}
```

**–†–µ—à–µ–Ω–∏–µ**:
–õ–∏–±–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 2.5, –ª–∏–±–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —á—Ç–æ–±—ã –æ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –∫–æ–¥—É.

---

### –ë–ê–ì #3: Race condition –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–§–∞–π–ª**: `components/contracts-screen.tsx:61-68`

**–ü—Ä–æ–±–ª–µ–º–∞**:
–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `saveGameState` —Å **—Å—Ç–∞—Ä—ã–º** `gameState` –≤–º–µ—Å—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ. –≠—Ç–æ race condition - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

**–ö–æ–¥**:
```typescript
const refreshContracts = () => {
  // ... –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è newContracts ...

  setGameState((prev) => ({
    ...prev,
    beatContracts: {
      ...prev.beatContracts,
      availableContracts: newContracts,
      lastRefreshDate: new Date().toISOString(),
    },
  }))

  // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π gameState, –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π
  saveGameState({
    ...gameState,  // ‚Üê —Å—Ç–∞—Ä–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ!
    beatContracts: {
      ...gameState.beatContracts,
      availableContracts: newContracts,
      lastRefreshDate: new Date().toISOString(),
    },
  })
}
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```typescript
const refreshContracts = () => {
  // ... –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è newContracts ...

  setGameState((prev) => {
    const updated = {
      ...prev,
      beatContracts: {
        ...prev.beatContracts,
        availableContracts: newContracts,
        lastRefreshDate: new Date().toISOString(),
      },
    }

    // ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    saveGameState(updated)

    return updated
  })
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –º–æ–≥—É—Ç –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è –¥—Ä—É–≥–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ—Ç–µ—Ä—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–≥—Ä–æ–∫–∞

---

### –ë–ê–ì #4: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞ —ç–Ω–µ—Ä–≥–∏–∏ –æ—Ç –∞—Ä—Ç–∏—Å—Ç–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü¢ –ù–ò–ó–ö–ò–ô (–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π)

**–§–∞–π–ª**: `components/artists-screen.tsx:120`

**–ü—Ä–æ–±–ª–µ–º–∞**:
–ë–æ–Ω—É—Å —ç–Ω–µ—Ä–≥–∏–∏ –æ—Ç –∞—Ä—Ç–∏—Å—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Ü–µ–Ω—Ç (`+{totalEnergyBonus}%`), –Ω–æ —ç—Ç–æ **–∞–±—Å–æ–ª—é—Ç–Ω–æ–µ** –∑–Ω–∞—á–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏, –∞ –Ω–µ –ø—Ä–æ—Ü–µ–Ω—Ç.

**–ö–æ–¥**:
```typescript
<p className="text-xl font-bold text-secondary">+{totalEnergyBonus}%</p>
<p className="text-xs text-muted-foreground">–≠–Ω–µ—Ä–≥–∏—è</p>
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```typescript
<p className="text-xl font-bold text-secondary">+{totalEnergyBonus}</p>
<p className="text-xs text-muted-foreground">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è</p>
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –∑–∞–ø—É—Ç–∞—Ç—å—Å—è –≤ —Ç–æ–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –±–æ–Ω—É—Å—ã
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ

---

### –ë–ê–ì #5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–§–∞–π–ª**: `app/page.tsx:121-145`

**–ü—Ä–æ–±–ª–µ–º–∞**:
–ö–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–≥—Ä—ã, –Ω–æ `activeContracts` —ç—Ç–æ –º–∞—Å—Å–∏–≤ **—Å—Ç—Ä–æ–∫** (IDs), –∞ –Ω–µ –æ–±—ä–µ–∫—Ç–æ–≤ `Contract`. –ö–æ–¥ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ `.timeLimit` –∏ `.acceptedAt` –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö, —á—Ç–æ –≤—Å–µ–≥–¥–∞ `undefined`.

**–ö–æ–¥**:
```typescript
if (savedState.activeContracts && savedState.activeContracts.length > 0) {
  const now = Date.now()
  const expiredContracts: Contract[] = []
  const validContracts: Contract[] = []

  savedState.activeContracts.forEach((contract) => {
    // ‚ùå contract —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ (ID), –∞ –Ω–µ –æ–±—ä–µ–∫—Ç!
    if (contract.timeLimit && contract.acceptedAt) {  // –≤—Å–µ–≥–¥–∞ undefined!
      const timeElapsed = now - contract.acceptedAt
      const timeLimitMs = contract.timeLimit * 60 * 1000

      if (timeElapsed >= timeLimitMs) {
        expiredContracts.push(contract)
      } else {
        validContracts.push(contract)
      }
    } else {
      validContracts.push(contract)
    }
  })
  // ...
}
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```typescript
if (savedState.beatContracts.activeContracts && savedState.beatContracts.activeContracts.length > 0) {
  const now = Date.now()
  const expiredContractIds: string[] = []
  const validContractIds: string[] = []

  savedState.beatContracts.activeContracts.forEach((contractId) => {
    // ‚úÖ –ü–æ–ª—É—á–∏—Ç—å –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –ø–æ ID
    const contract = BEAT_CONTRACTS_POOL.find(c => c.id === contractId)
    const progress = savedState.beatContracts.contractProgress[contractId]

    if (contract && contract.requirements.timeLimit && progress?.startedAt) {
      const timeElapsed = now - new Date(progress.startedAt).getTime()
      const timeLimitMs = contract.requirements.timeLimit * 60 * 60 * 1000 // —á–∞—Å—ã –≤ –º—Å

      if (timeElapsed >= timeLimitMs) {
        expiredContractIds.push(contractId)
      } else {
        validContractIds.push(contractId)
      }
    } else {
      validContractIds.push(contractId)
    }
  })

  if (expiredContractIds.length > 0) {
    console.log(`[v0] ${expiredContractIds.length} contract(s) expired while offline`)

    // –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏—Å—Ç–µ–∫—à–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
    const newProgress = { ...savedState.beatContracts.contractProgress }
    expiredContractIds.forEach(id => delete newProgress[id])

    savedState.beatContracts = {
      ...savedState.beatContracts,
      activeContracts: validContractIds,
      contractProgress: newProgress,
    }
  }
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ò—Å—Ç–µ–∫—à–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–≥—Ä—ã
- –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
- –ù–∞—Ä—É—à–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞

---

## ‚ÑπÔ∏è –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–ë–õ–Æ–î–ï–ù–ò–Ø

### 1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏

**–§–∞–π–ª—ã**:
- `app/page.tsx:191-198`
- `components/home-screen.tsx:41-57`
- `lib/game-state.ts:1255-1278` (—Ñ—É–Ω–∫—Ü–∏—è `calculateMaxEnergy`)
- `lib/game-storage.ts:112-129` (offline —ç–Ω–µ—Ä–≥–∏—è)

**–ü—Ä–æ–±–ª–µ–º–∞**: –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ 4 –º–µ—Å—Ç–∞—Ö. –≠—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º (–∫–∞–∫ –≤ –ë–ê–ì #1).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `calculateMaxEnergy()` –≤–µ–∑–¥–µ –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.

---

### 2. –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**:
- –í —Ç–∏–ø–∞—Ö: `activeContracts: string[]` (IDs)
- –í –∫–æ–¥–µ: –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—è–º –æ–±—ä–µ–∫—Ç–æ–≤ `Contract`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ß–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å:
- `BeatContract` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏–∑ –ø—É–ª–∞
- `ActiveContract` - –¥–∞–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å progress

---

### 3. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–§–∞–π–ª**: `app/page.tsx:173-178`

**–ù–∞–±–ª—é–¥–µ–Ω–∏–µ**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å —á—Ä–µ–∑–º–µ—Ä–Ω—ã–º –¥–ª—è Supabase. –ü—Ä–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π –∏–≥—Ä–µ —ç—Ç–æ 720 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–æ 10-15 —Å–µ–∫—É–Ω–¥ –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (money, reputation, energy).

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ê–£–î–ò–¢–ê

**–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ**:
- ‚úÖ –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª app/page.tsx (500 —Å—Ç—Ä–æ–∫)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —ç–Ω–µ—Ä–≥–∏–∏ –∏ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è game-storage.ts
- ‚úÖ –í—Å–µ —ç–∫—Ä–∞–Ω—ã (7 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- ‚úÖ –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ game-state.ts (1300+ —Å—Ç—Ä–æ–∫)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –∏ –ª–µ–π–±–ª–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≤—ã–∫–æ–≤
- ‚úÖ –†–∏—Ç–º-–∏–≥—Ä–∞

**–ù–∞–π–¥–µ–Ω–æ –±–∞–≥–æ–≤**:
- üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ: 3 (–ë–ê–ì #1, #3, #5)
- üü° –°—Ä–µ–¥–Ω–∏–µ: 1 (–ë–ê–ì #2)
- üü¢ –ù–∏–∑–∫–∏–µ/–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–µ: 1 (–ë–ê–ì #4)

**–í—Å–µ–≥–æ**: 5 –±–∞–≥–æ–≤

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):
1. **–ë–ê–ì #1** - –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–Ω–µ—Ä–≥–∏–∏ –±–µ–∑ –±–æ–Ω—É—Å–æ–≤ –∞—Ä—Ç–∏—Å—Ç–æ–≤
2. **–ë–ê–ì #5** - –ò—Å—Ç–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. **–ë–ê–ì #3** - Race condition –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
4. **–ë–ê–ì #2** - –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ ENERGY_REGEN_PER_MINUTE

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
5. **–ë–ê–ì #4** - –ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ UI

---

## ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û

- ‚úÖ Offline —ç–Ω–µ—Ä–≥–∏—è (lib/game-storage.ts) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –†–∞—Å—á–µ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –±–∏—Ç–æ–≤
- ‚úÖ –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã –±–∏—Ç–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≤—ã–∫–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ offline earnings
- ‚úÖ –ú–æ–¥–∞–ª–∫–∞ offline earnings
- ‚úÖ –†–∏—Ç–º-–∏–≥—Ä–∞
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Supabase
- ‚úÖ UI/UX –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤

---

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞**: 29 –æ–∫—Ç—è–±—Ä—è 2025
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~5000+
**–í—Ä–µ–º—è –∞—É–¥–∏—Ç–∞**: –ü–æ–ª–Ω—ã–π –∏ –ø–æ–¥—Ä–æ–±–Ω—ã–π
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

---

## SUMMARY

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ü–µ–ª–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ, –Ω–æ –∏–º–µ–µ—Ç **3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–∞**, –∫–æ—Ç–æ—Ä—ã–µ –≤–ª–∏—è—é—Ç –Ω–∞ –∏–≥—Ä–æ–≤–æ–π –±–∞–ª–∞–Ω—Å –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–≥—Ä–æ–∫–∞. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∏—Ö –±–∞–≥–æ–≤ –∏–≥—Ä–∞ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–µ–ª–∏–∑—É.
